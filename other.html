<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hotels</title>
<link rel="stylesheet" href="./style.css">
<style>

</style>
</head>
<body>

    <!-- ================= HEADER ================= -->
  <header class="hdr-bar" role="banner">
    <div class="hdr-left">
      <div class="hdr-logo">YN</div>
      <div>
        <h1 class="hdr-title">Quebec, Canada</h1>
        <div class="hdr-sub">Destination ¬∑ Fitness center ‚Ä¢ Restaurants</div>
      </div>
    </div>

    <div class="hdr-controls" aria-hidden="false">
      <div class="u-muted">Thu, Dec 04 ‚Äî Fri, Dec 05</div>
      <button class="hdr-btn" onclick="alert('Find hotels (placeholder)')">üîç Find Hotels</button>
    </div>
  </header>
    <header class="site-header" role="banner">
    <div class="topbar">
      <div class="brand" aria-label="Marriott Bonvoy brand">
        <div class="logo">MARRIOTT</div>
        <div class="sub">Bonvoy</div>
      </div>

      <nav class="nav" aria-label="Top navigation">
        <a href="#">Find &amp; Reserve</a>
        <a href="#">Special Offers</a>
        <a href="#">Vacations</a>
        <a href="#">Our Brands</a>
        <a href="#">Meetings &amp; Events</a>
      </nav>
    </div>
  </header>
  <section class="hero-wrap" aria-label="Hero banner">
    <!-- Use local screenshot first; fallback to Unsplash if missing -->
    <img class="hero-image" src="hero-quebec.png"
         alt="Scenic view of Quebec city"
         onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1506765515384-028b60a970df?q=80&w=1400&auto=format&fit=crop'">

    <!-- Search overlay -->
    <div class="search-card" role="search" aria-label="Find hotels search">
      <div class="search-col" style="min-width:260px">
        <label class="search-label" for="destination">Destination</label>
        <input id="destination" class="search-input" type="text" value="Quebec, Canada" />
      </div>

      <div class="search-col">
        <label class="search-label" for="dates">Dates</label>
        <input id="dates" class="search-input" type="text" value="Thu, Dec 04 - Fri, Dec 05" />
      </div>

      <div class="search-col">
        <label class="search-label" for="guests">Rooms &amp; Guests</label>
        <input id="guests" class="search-input search-mini" type="text" value="1 room, 2 guests" />
      </div>

      <div class="search-cta">
        <button class="btn-primary" type="button" aria-label="Find Hotels">Find Hotels</button>
      </div>
    </div>

    <!-- hero dots -->
    <div class="hero-controls" aria-hidden="true">
      <div class="dot active" title="slide 1"></div>
      <div class="dot" title="slide 2"></div>
      <div class="dot" title="slide 3"></div>
    </div>
  </section>

<div class="container" role="main">



  <!-- ================= HERO / Intro ================= -->
  <section class="sec" aria-labelledby="intro-title">
    <div class="sec-head" style="align-items:flex-start;">
      <h2 id="intro-title">Welcome to Quebec ‚Äî Explore hotels, deals & experiences</h2>
      <a class="sec-link" href="#" onclick="event.preventDefault()">View All Destinations ‚Üí</a>
    </div>

    <div style="display:flex; gap:20px; flex-wrap:wrap;">
      <div style="flex:1 1 620px;">
        <p class="kv-muted">
          Quebec is a living museum of French-Canadian culture ‚Äî cobblestone streets, historic architecture, and culinary delights.
          Browse hotels with fitness centers, restaurants, family-friendly amenities and more.
        </p>
      </div>

      <div style="flex:0 0 260px; display:flex; justify-content:flex-end; align-items:center;">
        <div style="text-align:right;">
          <div style="font-weight:700;">1 NIGHT</div>
          <div class="kv-muted">Thu, Dec 04 - Fri, Dec 05</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ================= CAROUSEL: Fitness Center Hotels (original first carousel) ================= -->
  <section class="sec" aria-labelledby="c1">
    <div class="sec-head">
      <h2 id="c1">Fitness Center Hotels in Quebec</h2>
      <a class="sec-link" href="#">View All ‚Üí</a>
    </div>

    <div class="crs" data-crs-id="fitness">
      <button class="crs-arrow crs-left" data-crs-action="left" aria-label="Scroll left">‚Äπ</button>

      <div class="crs-track" role="list" tabindex="0" aria-label="Fitness hotels carousel" data-crs-track>
        <article class="crs-card" role="listitem" tabindex="0">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1018/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Canada</span>
            <div class="crs-title">Delta Hotels Quebec</div>
          </div>
          <div class="crs-chev" aria-hidden="true">‚Ä∫</div>
        </article>

        <article class="crs-card" role="listitem" tabindex="0">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1025/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Canada</span>
            <div class="crs-title">Courtyard by Marriott Quebec City</div>
          </div>
          <div class="crs-chev" aria-hidden="true">‚Ä∫</div>
        </article>

        <article class="crs-card" role="listitem" tabindex="0">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1016/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Canada</span>
            <div class="crs-title">Delta Hotels, Mont Sainte-Anne</div>
          </div>
          <div class="crs-chev" aria-hidden="true">‚Ä∫</div>
        </article>

        <article class="crs-card" role="listitem" tabindex="0">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1031/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Canada</span>
            <div class="crs-title">Hotel PUR, Quebec ‚Äî Tribute</div>
          </div>
          <div class="crs-chev" aria-hidden="true">‚Ä∫</div>
        </article>
      </div>

      <button class="crs-arrow crs-right" data-crs-action="right" aria-label="Scroll right">‚Ä∫</button>

      <div class="crs-dots" data-crs-dots aria-hidden="false"></div>
    </div>
  </section>

  

  <!-- ================= CAROUSEL: Restaurants in Quebec (second carousel) ================= -->
  <section class="sec" aria-labelledby="c2">
    <div class="sec-head">
      <h2 id="c2">Hotels with Restaurants in Quebec</h2>
      <a class="sec-link" href="#">View All ‚Üí</a>
    </div>

    <div class="crs" data-crs-id="restaurants">
      <button class="crs-arrow crs-left" data-crs-action="left">‚Äπ</button>

      <div class="crs-track" role="list" tabindex="0" aria-label="Restaurants hotels carousel" data-crs-track>
        <article class="crs-card">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1019/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Canada</span>
            <div class="crs-title">Hotel PUR, Quebec, a Tribute Portfolio Hotel</div>
          </div>
          <div class="crs-chev">‚Ä∫</div>
        </article>

        <article class="crs-card">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1018/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Canada</span>
            <div class="crs-title">Delta Hotels Quebec</div>
          </div>
          <div class="crs-chev">‚Ä∫</div>
        </article>

        <article class="crs-card">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1005/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Canada</span>
            <div class="crs-title">Quebec City Marriott Downtown</div>
          </div>
          <div class="crs-chev">‚Ä∫</div>
        </article>

        <article class="crs-card">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1027/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Canada</span>
            <div class="crs-title">Courtyard by Marriott Quebec City</div>
          </div>
          <div class="crs-chev">‚Ä∫</div>
        </article>
      </div>

      <button class="crs-arrow crs-right" data-crs-action="right">‚Ä∫</button>

      <div class="crs-dots" data-crs-dots></div>
    </div>
  </section>

  <!-- ================= CAROUSEL: Offers & Deals (third merged carousel from other fragments) ================= -->
  <section class="sec" aria-labelledby="offers">
    <div class="sec-head">
      <h2 id="offers">Popular Offers in Quebec</h2>
      <a class="sec-link" href="#">View Offers ‚Üí</a>
    </div>

    <div class="crs" data-crs-id="offers">
      <button class="crs-arrow crs-left" data-crs-action="left">‚Äπ</button>

      <div class="crs-track" data-crs-track>
        <article class="crs-card">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1015/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Multiple Locations</span>
            <div class="crs-title">Winter Savings & Packages</div>
          </div>
          <div class="crs-chev">‚Ä∫</div>
        </article>

        <article class="crs-card">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1012/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Multiple Locations</span>
            <div class="crs-title">Save on 5+ Nights</div>
          </div>
          <div class="crs-chev">‚Ä∫</div>
        </article>

        <article class="crs-card">
          <div class="crs-media" style="background-image:url('https://picsum.photos/id/1017/1200/800');"></div>
          <div class="crs-grad"></div>
          <div class="crs-meta">
            <span class="crs-tag">Limited Time</span>
            <div class="crs-title">Breakfast Included Deals</div>
          </div>
          <div class="crs-chev">‚Ä∫</div>
        </article>

      </div>

      <button class="crs-arrow crs-right" data-crs-action="right">‚Ä∫</button>
      <div class="crs-dots" data-crs-dots></div>
    </div>
  </section>

  <!-- ================= EXPERIENCES GRID (merged content from third fragment) ================= -->
  <section class="sec" aria-labelledby="exp">
    <div class="sec-head">
      <h2 id="exp">Experiences & Travel Ideas</h2>
      <a class="sec-link" href="#">See all experiences ‚Üí</a>
    </div>

    <div class="exp-grid">
      <div class="exp-card">
        <div class="exp-icon">üìò</div>
        <h3 class="exp-title">Destination Guide</h3>
        <p class="exp-desc">Find your inspiration with insights into local attractions and neighborhood highlights.</p>
        <a class="btn-ghost" href="#">Learn More</a>
      </div>

      <div class="exp-card">
        <div class="exp-icon">‚≠ê</div>
        <h3 class="exp-title">Hotel & Travel Deals</h3>
        <p class="exp-desc">Discover exclusive Marriott Bonvoy offers within Quebec.</p>
        <a class="btn-ghost" href="#">Search Now</a>
      </div>

      <div class="exp-card">
        <div class="exp-icon">‚úàÔ∏è</div>
        <h3 class="exp-title">Hotels + Flight Packages</h3>
        <p class="exp-desc">Book a complete vacation with airfare and earn Marriott Bonvoy points.</p>
        <a class="btn-ghost" href="#">Search Packages</a>
      </div>

      <div class="exp-card exp-circle">
        <div class="exp-icon">üçΩÔ∏è</div>
        <h3 class="exp-title">Restaurants & Bars</h3>
        <p class="exp-desc">Find popular restaurants and bars in Quebec.</p>
        <a class="btn-ghost" href="#">Search Now</a>
        <div class="exp-arrow">‚Ä∫</div>
      </div>
    </div>
  </section>

  <!-- ================= HOTEL LISTINGS (merged long listing section) ================= -->
  <section class="sec" aria-labelledby="listings">
    <div class="sec-head">
      <h2 id="listings">Hotels in Quebec, Canada</h2>
      <div style="display:flex; gap:12px; align-items:center;">
        <div class="u-muted">Showing <strong id="shownRange">1-6</strong> of <strong id="totalItems">6</strong></div>
        <select id="sortSelect" style="padding:8px 10px; border-radius:8px; border:1px solid #e7e7e7; font-weight:600;">
          <option value="distance">Distance</option>
          <option value="price-low">Price (low to high)</option>
          <option value="price-high">Price (high to low)</option>
        </select>
      </div>
    </div>

    <div class="list-wrap">
      <!-- HOTEL CARD 1 -->
      <article class="list-item" data-index="0">
        <div class="list-media">
          <div class="media-nav">
            <button class="mnav prev" aria-label="previous image">‚Äπ</button>
            <button class="mnav next" aria-label="next image">‚Ä∫</button>
          </div>
          <img src="https://picsum.photos/id/1005/900/600" alt="Quebec City Marriott Downtown main photo" data-slides="https://picsum.photos/id/1005/900/600|https://picsum.photos/id/1011/900/600|https://picsum.photos/id/1012/900/600">
          <div class="media-dots" aria-hidden="true">
            <span class="active"></span><span></span><span></span>
          </div>
        </div>

        <div class="list-body">
          <div class="list-title">
            <h3>Quebec City Marriott Downtown</h3>
            <div class="kv-muted">‚òÖ 4.4 (669 reviews) ¬∑ 0.5 mi</div>
          </div>

          <div class="list-meta">Hotel in Quebec City boasting spacious rooms in the center of historic Old Quebec neighborhood</div>
          <div class="list-desc">Complimentary Wi-Fi, fitness centre and family rooms available.</div>

          <div class="list-actions">
            <div><a class="kv-muted" href="#">View Details ‚Üí</a></div>

            <div class="price-block" aria-hidden="false">
              <div class="kv-muted" style="font-size:12px;">Per night</div>
              <div class="price-amount">303 <span style="font-weight:500;color:var(--muted);font-size:13px;">CAD</span></div>
              <div style="margin-top:8px;"><button class="book-btn">Book Now</button></div>
            </div>
          </div>
        </div>
      </article>

      <!-- HOTEL CARD 2 -->
      <article class="list-item" data-index="1">
        <div class="list-media">
          <div class="media-nav">
            <button class="mnav prev">‚Äπ</button>
            <button class="mnav next">‚Ä∫</button>
          </div>
          <img src="https://picsum.photos/id/1031/900/600" alt="Delta Hotels Quebec main photo" data-slides="https://picsum.photos/id/1031/900/600|https://picsum.photos/id/1027/900/600">
          <div class="media-dots" aria-hidden="true"><span class="active"></span><span></span></div>
        </div>

        <div class="list-body">
          <div class="list-title">
            <h3>Delta Hotels Quebec</h3>
            <div class="kv-muted">‚òÖ 4.2 (412 reviews) ¬∑ 0.9 mi</div>
          </div>

          <div class="list-meta">Modern rooms, on-site dining and fitness centre near local attractions.</div>
          <div class="list-desc">Relax in modern rooms with city views and easy access to Old Quebec's attractions and restaurants.</div>

          <div class="list-actions">
            <div><a class="kv-muted" href="#">View Details ‚Üí</a></div>

            <div class="price-block">
              <div class="kv-muted" style="font-size:12px;">Per night</div>
              <div class="price-amount">215 <span style="font-weight:500;color:var(--muted);font-size:13px;">CAD</span></div>
              <div style="margin-top:8px;"><button class="book-btn">Book Now</button></div>
            </div>
          </div>
        </div>
      </article>

      <!-- HOTEL CARD 3 -->
      <article class="list-item" data-index="2">
        <div class="list-media">
          <div class="media-nav">
            <button class="mnav prev">‚Äπ</button>
            <button class="mnav next">‚Ä∫</button>
          </div>
          <img src="https://picsum.photos/id/1018/900/600" alt="Courtyard by Marriott Quebec City photo" data-slides="https://picsum.photos/id/1018/900/600|https://picsum.photos/id/1016/900/600">
          <div class="media-dots" aria-hidden="true"><span class="active"></span><span></span></div>
        </div>

        <div class="list-body">
          <div class="list-title">
            <h3>Courtyard by Marriott Quebec City</h3>
            <div class="kv-muted">‚òÖ 4.1 (323 reviews) ¬∑ 1.1 mi</div>
          </div>

          <div class="list-meta">Bright, modern rooms with a restaurant on site and easy access to cultural sites.</div>
          <div class="list-desc">Comfortable accommodations for business and leisure travelers, a relaxed lounge and on-site dining.</div>

          <div class="list-actions">
            <div><a class="kv-muted" href="#">View Details ‚Üí</a></div>

            <div class="price-block">
              <div class="kv-muted" style="font-size:12px;">Per night</div>
              <div class="price-amount">176 <span style="font-weight:500;color:var(--muted);font-size:13px;">CAD</span></div>
              <div style="margin-top:8px;"><button class="book-btn">Book Now</button></div>
            </div>
          </div>
        </div>
      </article>

      <!-- HOTEL CARD 4 -->
      <article class="list-item" data-index="3">
        <div class="list-media">
          <div class="media-nav">
            <button class="mnav prev">‚Äπ</button>
            <button class="mnav next">‚Ä∫</button>
          </div>
          <img src="https://picsum.photos/id/1016/900/600" alt="Mont Sainte-Anne photo" data-slides="https://picsum.photos/id/1016/900/600|https://picsum.photos/id/1013/900/600">
          <div class="media-dots" aria-hidden="true"><span class="active"></span><span></span></div>
        </div>

        <div class="list-body">
          <div class="list-title">
            <h3>Delta Hotels, Mont Sainte-Anne</h3>
            <div class="kv-muted">‚òÖ 4.3 (210 reviews) ¬∑ 8.1 mi</div>
          </div>

          <div class="list-meta">Ski resort hotel with fitness and mountain views.</div>
          <div class="list-desc">Amenities for families and seasonal packages for ski lovers.</div>

          <div class="list-actions">
            <div><a class="kv-muted" href="#">View Details ‚Üí</a></div>

            <div class="price-block">
              <div class="kv-muted" style="font-size:12px;">Per night</div>
              <div class="price-amount">250 <span style="font-weight:500;color:var(--muted);font-size:13px;">CAD</span></div>
              <div style="margin-top:8px;"><button class="book-btn">Book Now</button></div>
            </div>
          </div>
        </div>
      </article>

      <!-- HOTEL CARD 5 -->
      <article class="list-item" data-index="4">
        <div class="list-media">
          <div class="media-nav">
            <button class="mnav prev">‚Äπ</button>
            <button class="mnav next">‚Ä∫</button>
          </div>
          <img src="https://picsum.photos/id/1027/900/600" alt="Courtyard other photo" data-slides="https://picsum.photos/id/1027/900/600|https://picsum.photos/id/1029/900/600">
          <div class="media-dots" aria-hidden="true"><span class="active"></span><span></span></div>
        </div>

        <div class="list-body">
          <div class="list-title">
            <h3>Courtyard ‚Äî Old Quebec</h3>
            <div class="kv-muted">‚òÖ 4.0 (189 reviews) ¬∑ 1.3 mi</div>
          </div>

          <div class="list-meta">Comfortable stay in a historic neighborhood.</div>
          <div class="list-desc">Access to local tours and curated packages.</div>

          <div class="list-actions">
            <div><a class="kv-muted" href="#">View Details ‚Üí</a></div>

            <div class="price-block">
              <div class="kv-muted" style="font-size:12px;">Per night</div>
              <div class="price-amount">142 <span style="font-weight:500;color:var(--muted);font-size:13px;">CAD</span></div>
              <div style="margin-top:8px;"><button class="book-btn">Book Now</button></div>
            </div>
          </div>
        </div>
      </article>

      <!-- HOTEL CARD 6 -->
      <article class="list-item" data-index="5">
        <div class="list-media">
          <div class="media-nav">
            <button class="mnav prev">‚Äπ</button>
            <button class="mnav next">‚Ä∫</button>
          </div>
          <img src="https://picsum.photos/id/1009/900/600" alt="Hotel example photo" data-slides="https://picsum.photos/id/1009/900/600|https://picsum.photos/id/1010/900/600">
          <div class="media-dots" aria-hidden="true"><span class="active"></span><span></span></div>
        </div>

        <div class="list-body">
          <div class="list-title">
            <h3>Hotel PUR, Quebec ‚Äî Tribute</h3>
            <div class="kv-muted">‚òÖ 4.5 (512 reviews) ¬∑ 0.8 mi</div>
          </div>

          <div class="list-meta">Luxury property with dining and rooftop fitness.</div>
          <div class="list-desc">A contemporary hotel with curated guest experiences.</div>

          <div class="list-actions">
            <div><a class="kv-muted" href="#">View Details ‚Üí</a></div>

            <div class="price-block">
              <div class="kv-muted" style="font-size:12px;">Per night</div>
              <div class="price-amount">360 <span style="font-weight:500;color:var(--muted);font-size:13px;">CAD</span></div>
              <div style="margin-top:8px;"><button class="book-btn">Book Now</button></div>
            </div>
          </div>
        </div>
      </article>

    </div>
  </section>
</div>

  <!-- ================= FOOTER ================= -->
  <footer class="ftr" role="contentinfo" aria-labelledby="footerTitle">
    <div class="ftr-inner">
      <div class="ftr-grid">
        <div>
          <h4>Our Company</h4>
          <a href="#">About Marriott International</a>
          <a href="#">Careers</a>
          <a href="#">Investor Relations</a>
          <a href="#">News</a>
          <a href="#">Our Stories</a>
        </div>

        <div>
          <h4>Work With Us</h4>
          <a href="#">Small & Midsize Business Program</a>
          <a href="#">Travel Professionals</a>
          <a href="#">Group Partners</a>
        </div>

        <div>
          <h4>Find Help</h4>
          <a href="#">Help & Contact Us</a>
          <a href="#">Look Up Reservation</a>
          <a href="#">Phone Numbers</a>
        </div>

        <div>
          <h4>Privacy & Terms</h4>
          <a href="#">Privacy Center</a>
          <a href="#">Terms of Use</a>
          <a href="#">Sustainability</a>
        </div>
      </div>

      <div style="border-top:1px solid rgba(255,255,255,0.06); margin:40px 0 20px;"></div>

      <h4 id="footerTitle">Follow Marriott Bonvoy</h4>
      <div style="display:flex; gap:14px; margin:10px 0 20px;">
        <a href="#" style="color:white;">Facebook</a>
        <a href="#" style="color:white;">Instagram</a>
        <a href="#" style="color:white;">YouTube</a>
        <a href="#" style="color:white;">LinkedIn</a>
        <a href="#" style="color:white;">X</a>
      </div>

      <div class="kv-muted" style="margin-top:20px;">¬© 1996 - 2025 Marriott International, Inc. All rights reserved.</div>
    </div>
  </footer>


<script>
/* ==========================================================================
   Unified JS for:
   - multiple carousels (.crs)
   - each carousel: build dots, arrow scroll, active dot update
   - hotel list internal small carousels (image slides)
   - minimal sort placeholder & counters
   ========================================================================== */

(function(){
  /* ----------------------------
     Utilities
     ---------------------------- */
  function q(sel, root=document){ return root.querySelector(sel); }
  function qa(sel, root=document){ return Array.from(root.querySelectorAll(sel)); }

  /* ----------------------------
     Carousel initialization
     Data attributes:
       - data-crs-id on .crs root (optional)
       - .crs-track is the scroll container
       - .crs-arrow with data-crs-action="left"/"right"
       - .crs-dots is where we build dot elements
     ---------------------------- */
  function initSingleCarousel(crsRoot){
    const track = crsRoot.querySelector('.crs-track');
    const leftBtn = crsRoot.querySelector('[data-crs-action="left"]');
    const rightBtn = crsRoot.querySelector('[data-crs-action="right"]');
    const dotsWrap = crsRoot.querySelector('.crs-dots');

    if(!track) return;
    const cards = Array.from(track.children).filter(n => n.nodeType===1);

    // compute pages: number of pages = ceil(total / visible)
    function compute(){
      const trackW = track.clientWidth;
      const gap = parseFloat(getComputedStyle(track).gap) || 0;
      const cardRect = cards[0]?.getBoundingClientRect();
      const cardW = (cardRect ? cardRect.width : 240) + gap;
      const visible = Math.max(1, Math.floor(trackW / cardW));
      const pages = Math.max(1, Math.ceil(cards.length / visible));
      return { cardW, visible, pages };
    }

    function renderDots(){
      if(!dotsWrap) return;
      dotsWrap.innerHTML = '';
      const { pages } = compute();
      for(let i=0;i<pages;i++){
        const b = document.createElement('button');
        b.className = 'crs-dot';
        b.type = 'button';
        b.setAttribute('aria-label', 'Go to page ' + (i+1));
        b.addEventListener('click', ()=> scrollToPage(i));
        dotsWrap.appendChild(b);
      }
      updateActiveDot();
    }

    function updateActiveDot(){
      if(!dotsWrap) return;
      const { pages, visible, cardW } = compute();
      const scrollLeft = track.scrollLeft;
      const page = Math.round(scrollLeft / (cardW * visible));
      const dots = Array.from(dotsWrap.children);
      dots.forEach((d,i)=> d.classList.toggle('crs-active', i === page));
    }

    function scrollToPage(idx){
      const { visible, cardW } = compute();
      const x = idx * visible * cardW;
      track.scrollTo({ left: x, behavior: 'smooth' });
    }

    // arrow handlers
    if(leftBtn){
      leftBtn.addEventListener('click', ()=> {
        const { visible, cardW } = compute();
        track.scrollBy({ left: -visible * cardW, behavior:'smooth' });
      });
    }
    if(rightBtn){
      rightBtn.addEventListener('click', ()=> {
        const { visible, cardW } = compute();
        track.scrollBy({ left: visible * cardW, behavior:'smooth' });
      });
    }

    // scroll listener -> update dots (throttled with RAF)
    let raf;
    track.addEventListener('scroll', ()=> {
      if(raf) cancelAnimationFrame(raf);
      raf = requestAnimationFrame(updateActiveDot);
    });

    // keyboard controls if focused
    track.addEventListener('keydown', (ev)=> {
      if(ev.key === 'ArrowRight'){ rightBtn && rightBtn.click(); ev.preventDefault(); }
      if(ev.key === 'ArrowLeft'){ leftBtn && leftBtn.click(); ev.preventDefault(); }
    });

    // recalc on resize and initial render
    window.addEventListener('resize', ()=> { renderDots(); updateActiveDot(); });
    renderDots();
    updateActiveDot();
  }

  // init all carousels on page
  qa('.crs').forEach(initSingleCarousel);

  /* ----------------------------
     LISTINGS: image slides per hotel card
     - parse data-slides attribute from <img>
     - next/prev buttons navigate slides and update dots
     ---------------------------- */
  qa('.list-item').forEach(listCard => {
    const img = q('img', listCard);
    if(!img) return;
    const nextBtn = q('.mnav.next', listCard);
    const prevBtn = q('.mnav.prev', listCard);
    const dotsWrap = q('.media-dots', listCard);

    const slides = (img.dataset.slides || '').split('|').filter(Boolean);
    if(!slides.length) return;

    let idx = 0;
    function show(i){
      idx = (i + slides.length) % slides.length;
      img.src = slides[idx];
      if(dotsWrap){
        Array.from(dotsWrap.children).forEach((d,di)=> d.classList.toggle('active', di === idx));
      }
    }

    nextBtn && nextBtn.addEventListener('click', (e)=>{ e.stopPropagation(); show(idx+1); });
    prevBtn && prevBtn.addEventListener('click', (e)=>{ e.stopPropagation(); show(idx-1); });
    img.addEventListener('click', ()=> show(idx+1));
  });

  /* ----------------------------
     Card click: progressive enhancement for crs-card & list-item
     - open placeholder alert with title
     ---------------------------- */
  qa('.crs-card, .list-item').forEach(node=>{
    node.addEventListener('click', (e)=>{
      // find a title inside
      const t = q('.crs-title, .list-title h3', node) || q('.list-title h3', node);
      const titleText = t ? (t.innerText || t.textContent) : 'Item';
      alert(titleText + '\\n(Details placeholder)');
    });
  });

  /* ----------------------------
     Small UX: sort select placeholder
     ---------------------------- */
  const sortSel = q('#sortSelect');
  if(sortSel){
    sortSel.addEventListener('change', ()=>{
      const list = q('.list-wrap');
      list.style.opacity = '0.6';
      setTimeout(()=> list.style.opacity = '1', 220);
    });
  }

  /* ----------------------------
     Update counts for shown and total (simple)
     ---------------------------- */
  const total = qa('.list-item').length;
  const shownRange = q('#shownRange');
  const totalItems = q('#totalItems');
  if(shownRange) shownRange.textContent = '1-' + total;
  if(totalItems) totalItems.textContent = total;

  /* ----------------------------
     Accessibility niceties: focus outlines kept (already styled via default)
     ---------------------------- */

})();
</script>

</body>
</html>
